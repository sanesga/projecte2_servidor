!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("@angular/core"),require("@ngxs/store"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngxs/logger-plugin",["exports","@angular/core","@ngxs/store","rxjs/operators"],o):o(((t=t||self).ngxs=t.ngxs||{},t.ngxs["logger-plugin"]={}),t.ng.core,t["ngxs-store"],t.rxjs.operators)}(this,(function(t,o,e,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n=function(){return(n=Object.assign||function(t){for(var o,e=1,r=arguments.length;e<r;e++)for(var n in o=arguments[e])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};var i=new o.InjectionToken("NGXS_LOGGER_PLUGIN_OPTIONS"),s=function(t,o){return e="0",r=o-t.toString().length,new Array(r+1).join(e)+t;var e,r};var g=function(){function t(t,o,e){this.action=t,this.store=o,this.logWriter=e}return t.prototype.dispatched=function(t){var o,r="action "+e.getActionTypeFromInstance(this.action)+" @ "+(o=new Date,s(o.getHours(),2)+":"+s(o.getMinutes(),2)+":"+s(o.getSeconds(),2)+"."+s(o.getMilliseconds(),3));this.logWriter.startGroup(r),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",n({},this.action)),this.logWriter.logGrey("prev state",t)},t.prototype.completed=function(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()},t.prototype.errored=function(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()},t.prototype._hasPayload=function(t){return this._getNonEmptyProperties(t).length>0},t.prototype._getNonEmptyProperties=function(t){return Object.keys(t).map((function(o){return t[o]})).filter((function(t){return!!t}))},t}();var l=function(){function t(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}return t.prototype.startGroup=function(t){var o=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{o.call(this.logger,t)}catch(o){console.log(t)}},t.prototype.endGroup=function(){try{this.logger.groupEnd()}catch(t){this.logger.log("—— log end ——")}},t.prototype.logGrey=function(t,o){this.log(t,"color: #9E9E9E; font-weight: bold",o)},t.prototype.logGreen=function(t,o){this.log(t,"color: #4CAF50; font-weight: bold",o)},t.prototype.logRedish=function(t,o){this.log(t,"color: #FD8182; font-weight: bold",o)},t.prototype.log=function(t,o,e){this.isIE()?this.logger.log(t,e):this.logger.log("%c "+t,o,e)},t.prototype.isIE=function(){var t="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"",o=!1,e=t.indexOf("MSIE "),r=t.indexOf("Trident/");return(e>-1||r>-1)&&(o=!0),o},t}();var p=function(){function t(t,o){this._options=t,this._injector=o}return t.prototype.handle=function(t,o,n){if(this._options.disabled)return n(t,o);var i=new l(this._options),s=this._injector.get(e.Store),p=new g(o,s,i);return p.dispatched(t),n(t,o).pipe(r.tap((function(t){p.completed(t)})),r.catchError((function(t){throw p.errored(t),t})))},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:o.Inject,args:[i]}]},{type:o.Injector}]},t}();var u=new o.InjectionToken("LOGGER_USER_OPTIONS");function c(t){var o={logger:console,collapsed:!1,disabled:!1};return n({},o,t)}var a=function(){function t(){}return t.forRoot=function(o){return{ngModule:t,providers:[{provide:e.NGXS_PLUGINS,useClass:p,multi:!0},{provide:u,useValue:o},{provide:i,useFactory:c,deps:[u]}]}},t.decorators=[{type:o.NgModule}],t}();t.NGXS_LOGGER_PLUGIN_OPTIONS=i,t.NgxsLoggerPlugin=p,t.NgxsLoggerPluginModule=a,t.ɵa=u,t.ɵb=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngxs-logger-plugin.umd.min.js.map