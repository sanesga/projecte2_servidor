/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { map, filter } from 'rxjs/operators';
import { getActionTypeFromInstance } from '../utils/utils';
/**
 * @record
 * @template T, E
 */
export function ActionCompletion() { }
if (false) {
    /** @type {?} */
    ActionCompletion.prototype.action;
    /** @type {?} */
    ActionCompletion.prototype.result;
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will grab actions that have just been dispatched as well as actions that have completed
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofAction(...allowedTypes) {
    return ofActionOperator(allowedTypes);
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will ONLY grab actions that have just been dispatched
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofActionDispatched(...allowedTypes) {
    return ofActionOperator(allowedTypes, ["DISPATCHED" /* Dispatched */]);
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will ONLY grab actions that have just been successfully completed
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofActionSuccessful(...allowedTypes) {
    return ofActionOperator(allowedTypes, ["SUCCESSFUL" /* Successful */]);
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will ONLY grab actions that have just been canceled
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofActionCanceled(...allowedTypes) {
    return ofActionOperator(allowedTypes, ["CANCELED" /* Canceled */]);
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will ONLY grab actions that have just been completed
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofActionCompleted(...allowedTypes) {
    /** @type {?} */
    const allowedStatuses = [
        "SUCCESSFUL" /* Successful */,
        "CANCELED" /* Canceled */,
        "ERRORED" /* Errored */
    ];
    return ofActionOperator(allowedTypes, allowedStatuses, mapActionResult);
}
/**
 * RxJS operator for selecting out specific actions.
 *
 * This will ONLY grab actions that have just thrown an error
 * @param {...?} allowedTypes
 * @return {?}
 */
export function ofActionErrored(...allowedTypes) {
    return ofActionOperator(allowedTypes, ["ERRORED" /* Errored */]);
}
/**
 * @template T
 * @param {?} allowedTypes
 * @param {?=} statuses
 * @param {?=} mapOperator
 * @return {?}
 */
function ofActionOperator(allowedTypes, statuses, mapOperator = mapAction) {
    /** @type {?} */
    const allowedMap = createAllowedActionTypesMap(allowedTypes);
    /** @type {?} */
    const allowedStatusMap = statuses && createAllowedStatusesMap(statuses);
    return (/**
     * @param {?} o
     * @return {?}
     */
    function (o) {
        return o.pipe(filterStatus(allowedMap, allowedStatusMap), mapOperator());
    });
}
/**
 * @param {?} allowedTypes
 * @param {?=} allowedStatuses
 * @return {?}
 */
function filterStatus(allowedTypes, allowedStatuses) {
    return filter((/**
     * @param {?} ctx
     * @return {?}
     */
    (ctx) => {
        /** @type {?} */
        const actionType = (/** @type {?} */ (getActionTypeFromInstance(ctx.action)));
        /** @type {?} */
        const typeMatch = allowedTypes[actionType];
        /** @type {?} */
        const statusMatch = allowedStatuses ? allowedStatuses[ctx.status] : true;
        return typeMatch && statusMatch;
    }));
}
/**
 * @return {?}
 */
function mapActionResult() {
    return map((/**
     * @param {?} __0
     * @return {?}
     */
    ({ action, status, error }) => {
        return (/** @type {?} */ ({
            action,
            result: {
                successful: "SUCCESSFUL" /* Successful */ === status,
                canceled: "CANCELED" /* Canceled */ === status,
                error
            }
        }));
    }));
}
/**
 * @template T
 * @return {?}
 */
function mapAction() {
    return map((/**
     * @param {?} ctx
     * @return {?}
     */
    (ctx) => (/** @type {?} */ (ctx.action))));
}
/**
 * @record
 */
function FilterMap() { }
/**
 * @param {?} types
 * @return {?}
 */
function createAllowedActionTypesMap(types) {
    return types.reduce((/**
     * @param {?} filterMap
     * @param {?} klass
     * @return {?}
     */
    (filterMap, klass) => {
        filterMap[(/** @type {?} */ (getActionTypeFromInstance(klass)))] = true;
        return filterMap;
    }), (/** @type {?} */ ({})));
}
/**
 * @param {?} statuses
 * @return {?}
 */
function createAllowedStatusesMap(statuses) {
    return statuses.reduce((/**
     * @param {?} filterMap
     * @param {?} status
     * @return {?}
     */
    (filterMap, status) => {
        filterMap[status] = true;
        return filterMap;
    }), (/** @type {?} */ ({})));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2YtYWN0aW9uLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG5neHMvc3RvcmUvIiwic291cmNlcyI6WyJzcmMvb3BlcmF0b3JzL29mLWFjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7QUFHM0Qsc0NBT0M7OztJQU5DLGtDQUFVOztJQUNWLGtDQUlFOzs7Ozs7Ozs7QUFXSixNQUFNLFVBQVUsUUFBUSxDQUFDLEdBQUcsWUFBbUI7SUFDN0MsT0FBTyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN4QyxDQUFDOzs7Ozs7OztBQU9ELE1BQU0sVUFBVSxrQkFBa0IsQ0FBQyxHQUFHLFlBQW1CO0lBQ3ZELE9BQU8sZ0JBQWdCLENBQUMsWUFBWSxFQUFFLCtCQUF5QixDQUFDLENBQUM7QUFDbkUsQ0FBQzs7Ozs7Ozs7QUFPRCxNQUFNLFVBQVUsa0JBQWtCLENBQUMsR0FBRyxZQUFtQjtJQUN2RCxPQUFPLGdCQUFnQixDQUFDLFlBQVksRUFBRSwrQkFBeUIsQ0FBQyxDQUFDO0FBQ25FLENBQUM7Ozs7Ozs7O0FBT0QsTUFBTSxVQUFVLGdCQUFnQixDQUFDLEdBQUcsWUFBbUI7SUFDckQsT0FBTyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUsMkJBQXVCLENBQUMsQ0FBQztBQUNqRSxDQUFDOzs7Ozs7OztBQU9ELE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxHQUFHLFlBQW1COztVQUNoRCxlQUFlLEdBQUc7Ozs7S0FJdkI7SUFDRCxPQUFPLGdCQUFnQixDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDMUUsQ0FBQzs7Ozs7Ozs7QUFPRCxNQUFNLFVBQVUsZUFBZSxDQUFDLEdBQUcsWUFBbUI7SUFDcEQsT0FBTyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQUUseUJBQXNCLENBQUMsQ0FBQztBQUNoRSxDQUFDOzs7Ozs7OztBQUVELFNBQVMsZ0JBQWdCLENBQ3ZCLFlBQW1CLEVBQ25CLFFBQXlCLEVBQ3pCLGNBQXdELFNBQVM7O1VBRTNELFVBQVUsR0FBRywyQkFBMkIsQ0FBQyxZQUFZLENBQUM7O1VBQ3RELGdCQUFnQixHQUFHLFFBQVEsSUFBSSx3QkFBd0IsQ0FBQyxRQUFRLENBQUM7SUFDdkU7Ozs7SUFBTyxVQUFTLENBQTRCO1FBQzFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FDWCxZQUFZLENBQUMsVUFBVSxFQUFFLGdCQUFnQixDQUFDLEVBQzFDLFdBQVcsRUFBRSxDQUNkLENBQUM7SUFDSixDQUFDLEVBQUM7QUFDSixDQUFDOzs7Ozs7QUFFRCxTQUFTLFlBQVksQ0FBQyxZQUF1QixFQUFFLGVBQTJCO0lBQ3hFLE9BQU8sTUFBTTs7OztJQUFDLENBQUMsR0FBa0IsRUFBRSxFQUFFOztjQUM3QixVQUFVLEdBQUcsbUJBQUEseUJBQXlCLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFDOztjQUNuRCxTQUFTLEdBQUcsWUFBWSxDQUFDLFVBQVUsQ0FBQzs7Y0FDcEMsV0FBVyxHQUFHLGVBQWUsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSTtRQUN4RSxPQUFPLFNBQVMsSUFBSSxXQUFXLENBQUM7SUFDbEMsQ0FBQyxFQUFDLENBQUM7QUFDTCxDQUFDOzs7O0FBRUQsU0FBUyxlQUFlO0lBQ3RCLE9BQU8sR0FBRzs7OztJQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBaUIsRUFBRSxFQUFFO1FBQ3RELE9BQU8sbUJBQWtCO1lBQ3ZCLE1BQU07WUFDTixNQUFNLEVBQUU7Z0JBQ04sVUFBVSxFQUFFLGtDQUE0QixNQUFNO2dCQUM5QyxRQUFRLEVBQUUsOEJBQTBCLE1BQU07Z0JBQzFDLEtBQUs7YUFDTjtTQUNGLEVBQUEsQ0FBQztJQUNKLENBQUMsRUFBQyxDQUFDO0FBQ0wsQ0FBQzs7Ozs7QUFFRCxTQUFTLFNBQVM7SUFDaEIsT0FBTyxHQUFHOzs7O0lBQUMsQ0FBQyxHQUFrQixFQUFFLEVBQUUsQ0FBQyxtQkFBRyxHQUFHLENBQUMsTUFBTSxFQUFBLEVBQUMsQ0FBQztBQUNwRCxDQUFDOzs7O0FBRUQsd0JBRUM7Ozs7O0FBRUQsU0FBUywyQkFBMkIsQ0FBQyxLQUFZO0lBQy9DLE9BQU8sS0FBSyxDQUFDLE1BQU07Ozs7O0lBQ2pCLENBQUMsU0FBb0IsRUFBRSxLQUFVLEVBQUUsRUFBRTtRQUNuQyxTQUFTLENBQUMsbUJBQUEseUJBQXlCLENBQUMsS0FBSyxDQUFDLEVBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUNwRCxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDLEdBQ0QsbUJBQVcsRUFBRSxFQUFBLENBQ2QsQ0FBQztBQUNKLENBQUM7Ozs7O0FBRUQsU0FBUyx3QkFBd0IsQ0FBQyxRQUF3QjtJQUN4RCxPQUFPLFFBQVEsQ0FBQyxNQUFNOzs7OztJQUNwQixDQUFDLFNBQW9CLEVBQUUsTUFBb0IsRUFBRSxFQUFFO1FBQzdDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDekIsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQyxHQUNELG1CQUFXLEVBQUUsRUFBQSxDQUNkLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlcmF0b3JGdW5jdGlvbiwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBtYXAsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgZ2V0QWN0aW9uVHlwZUZyb21JbnN0YW5jZSB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQWN0aW9uQ29udGV4dCwgQWN0aW9uU3RhdHVzIH0gZnJvbSAnLi4vYWN0aW9ucy1zdHJlYW0nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb25Db21wbGV0aW9uPFQgPSBhbnksIEUgPSBFcnJvcj4ge1xyXG4gIGFjdGlvbjogVDtcclxuICByZXN1bHQ6IHtcclxuICAgIHN1Y2Nlc3NmdWw6IGJvb2xlYW47XHJcbiAgICBjYW5jZWxlZDogYm9vbGVhbjtcclxuICAgIGVycm9yPzogRTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb2ZBY3Rpb248VD4oYWxsb3dlZFR5cGU6IGFueSk6IE9wZXJhdG9yRnVuY3Rpb248QWN0aW9uQ29udGV4dCwgVD47XHJcbmV4cG9ydCBmdW5jdGlvbiBvZkFjdGlvbjxUPiguLi5hbGxvd2VkVHlwZXM6IGFueVtdKTogT3BlcmF0b3JGdW5jdGlvbjxBY3Rpb25Db250ZXh0LCBUPjtcclxuXHJcbi8qKlxyXG4gKiBSeEpTIG9wZXJhdG9yIGZvciBzZWxlY3Rpbmcgb3V0IHNwZWNpZmljIGFjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCBncmFiIGFjdGlvbnMgdGhhdCBoYXZlIGp1c3QgYmVlbiBkaXNwYXRjaGVkIGFzIHdlbGwgYXMgYWN0aW9ucyB0aGF0IGhhdmUgY29tcGxldGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gb2ZBY3Rpb24oLi4uYWxsb3dlZFR5cGVzOiBhbnlbXSkge1xyXG4gIHJldHVybiBvZkFjdGlvbk9wZXJhdG9yKGFsbG93ZWRUeXBlcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSeEpTIG9wZXJhdG9yIGZvciBzZWxlY3Rpbmcgb3V0IHNwZWNpZmljIGFjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCBPTkxZIGdyYWIgYWN0aW9ucyB0aGF0IGhhdmUganVzdCBiZWVuIGRpc3BhdGNoZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvZkFjdGlvbkRpc3BhdGNoZWQoLi4uYWxsb3dlZFR5cGVzOiBhbnlbXSkge1xyXG4gIHJldHVybiBvZkFjdGlvbk9wZXJhdG9yKGFsbG93ZWRUeXBlcywgW0FjdGlvblN0YXR1cy5EaXNwYXRjaGVkXSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSeEpTIG9wZXJhdG9yIGZvciBzZWxlY3Rpbmcgb3V0IHNwZWNpZmljIGFjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCBPTkxZIGdyYWIgYWN0aW9ucyB0aGF0IGhhdmUganVzdCBiZWVuIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBvZkFjdGlvblN1Y2Nlc3NmdWwoLi4uYWxsb3dlZFR5cGVzOiBhbnlbXSkge1xyXG4gIHJldHVybiBvZkFjdGlvbk9wZXJhdG9yKGFsbG93ZWRUeXBlcywgW0FjdGlvblN0YXR1cy5TdWNjZXNzZnVsXSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSeEpTIG9wZXJhdG9yIGZvciBzZWxlY3Rpbmcgb3V0IHNwZWNpZmljIGFjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCBPTkxZIGdyYWIgYWN0aW9ucyB0aGF0IGhhdmUganVzdCBiZWVuIGNhbmNlbGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gb2ZBY3Rpb25DYW5jZWxlZCguLi5hbGxvd2VkVHlwZXM6IGFueVtdKSB7XHJcbiAgcmV0dXJuIG9mQWN0aW9uT3BlcmF0b3IoYWxsb3dlZFR5cGVzLCBbQWN0aW9uU3RhdHVzLkNhbmNlbGVkXSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSeEpTIG9wZXJhdG9yIGZvciBzZWxlY3Rpbmcgb3V0IHNwZWNpZmljIGFjdGlvbnMuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCBPTkxZIGdyYWIgYWN0aW9ucyB0aGF0IGhhdmUganVzdCBiZWVuIGNvbXBsZXRlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG9mQWN0aW9uQ29tcGxldGVkKC4uLmFsbG93ZWRUeXBlczogYW55W10pIHtcclxuICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbXHJcbiAgICBBY3Rpb25TdGF0dXMuU3VjY2Vzc2Z1bCxcclxuICAgIEFjdGlvblN0YXR1cy5DYW5jZWxlZCxcclxuICAgIEFjdGlvblN0YXR1cy5FcnJvcmVkXHJcbiAgXTtcclxuICByZXR1cm4gb2ZBY3Rpb25PcGVyYXRvcihhbGxvd2VkVHlwZXMsIGFsbG93ZWRTdGF0dXNlcywgbWFwQWN0aW9uUmVzdWx0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJ4SlMgb3BlcmF0b3IgZm9yIHNlbGVjdGluZyBvdXQgc3BlY2lmaWMgYWN0aW9ucy5cclxuICpcclxuICogVGhpcyB3aWxsIE9OTFkgZ3JhYiBhY3Rpb25zIHRoYXQgaGF2ZSBqdXN0IHRocm93biBhbiBlcnJvclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG9mQWN0aW9uRXJyb3JlZCguLi5hbGxvd2VkVHlwZXM6IGFueVtdKSB7XHJcbiAgcmV0dXJuIG9mQWN0aW9uT3BlcmF0b3IoYWxsb3dlZFR5cGVzLCBbQWN0aW9uU3RhdHVzLkVycm9yZWRdKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb2ZBY3Rpb25PcGVyYXRvcjxUID0gYW55PihcclxuICBhbGxvd2VkVHlwZXM6IGFueVtdLFxyXG4gIHN0YXR1c2VzPzogQWN0aW9uU3RhdHVzW10sXHJcbiAgbWFwT3BlcmF0b3I6ICgpID0+IE9wZXJhdG9yRnVuY3Rpb248QWN0aW9uQ29udGV4dCwgVD4gPSBtYXBBY3Rpb25cclxuKSB7XHJcbiAgY29uc3QgYWxsb3dlZE1hcCA9IGNyZWF0ZUFsbG93ZWRBY3Rpb25UeXBlc01hcChhbGxvd2VkVHlwZXMpO1xyXG4gIGNvbnN0IGFsbG93ZWRTdGF0dXNNYXAgPSBzdGF0dXNlcyAmJiBjcmVhdGVBbGxvd2VkU3RhdHVzZXNNYXAoc3RhdHVzZXMpO1xyXG4gIHJldHVybiBmdW5jdGlvbihvOiBPYnNlcnZhYmxlPEFjdGlvbkNvbnRleHQ+KSB7XHJcbiAgICByZXR1cm4gby5waXBlKFxyXG4gICAgICBmaWx0ZXJTdGF0dXMoYWxsb3dlZE1hcCwgYWxsb3dlZFN0YXR1c01hcCksXHJcbiAgICAgIG1hcE9wZXJhdG9yKClcclxuICAgICk7XHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyU3RhdHVzKGFsbG93ZWRUeXBlczogRmlsdGVyTWFwLCBhbGxvd2VkU3RhdHVzZXM/OiBGaWx0ZXJNYXApIHtcclxuICByZXR1cm4gZmlsdGVyKChjdHg6IEFjdGlvbkNvbnRleHQpID0+IHtcclxuICAgIGNvbnN0IGFjdGlvblR5cGUgPSBnZXRBY3Rpb25UeXBlRnJvbUluc3RhbmNlKGN0eC5hY3Rpb24pITtcclxuICAgIGNvbnN0IHR5cGVNYXRjaCA9IGFsbG93ZWRUeXBlc1thY3Rpb25UeXBlXTtcclxuICAgIGNvbnN0IHN0YXR1c01hdGNoID0gYWxsb3dlZFN0YXR1c2VzID8gYWxsb3dlZFN0YXR1c2VzW2N0eC5zdGF0dXNdIDogdHJ1ZTtcclxuICAgIHJldHVybiB0eXBlTWF0Y2ggJiYgc3RhdHVzTWF0Y2g7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcEFjdGlvblJlc3VsdCgpOiBPcGVyYXRvckZ1bmN0aW9uPEFjdGlvbkNvbnRleHQsIEFjdGlvbkNvbXBsZXRpb24+IHtcclxuICByZXR1cm4gbWFwKCh7IGFjdGlvbiwgc3RhdHVzLCBlcnJvciB9OiBBY3Rpb25Db250ZXh0KSA9PiB7XHJcbiAgICByZXR1cm4gPEFjdGlvbkNvbXBsZXRpb24+e1xyXG4gICAgICBhY3Rpb24sXHJcbiAgICAgIHJlc3VsdDoge1xyXG4gICAgICAgIHN1Y2Nlc3NmdWw6IEFjdGlvblN0YXR1cy5TdWNjZXNzZnVsID09PSBzdGF0dXMsXHJcbiAgICAgICAgY2FuY2VsZWQ6IEFjdGlvblN0YXR1cy5DYW5jZWxlZCA9PT0gc3RhdHVzLFxyXG4gICAgICAgIGVycm9yXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hcEFjdGlvbjxUID0gYW55PigpOiBPcGVyYXRvckZ1bmN0aW9uPEFjdGlvbkNvbnRleHQsIFQ+IHtcclxuICByZXR1cm4gbWFwKChjdHg6IEFjdGlvbkNvbnRleHQpID0+IDxUPmN0eC5hY3Rpb24pO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmlsdGVyTWFwIHtcclxuICBba2V5OiBzdHJpbmddOiBib29sZWFuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVBbGxvd2VkQWN0aW9uVHlwZXNNYXAodHlwZXM6IGFueVtdKTogRmlsdGVyTWFwIHtcclxuICByZXR1cm4gdHlwZXMucmVkdWNlKFxyXG4gICAgKGZpbHRlck1hcDogRmlsdGVyTWFwLCBrbGFzczogYW55KSA9PiB7XHJcbiAgICAgIGZpbHRlck1hcFtnZXRBY3Rpb25UeXBlRnJvbUluc3RhbmNlKGtsYXNzKSFdID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGZpbHRlck1hcDtcclxuICAgIH0sXHJcbiAgICA8RmlsdGVyTWFwPnt9XHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQWxsb3dlZFN0YXR1c2VzTWFwKHN0YXR1c2VzOiBBY3Rpb25TdGF0dXNbXSk6IEZpbHRlck1hcCB7XHJcbiAgcmV0dXJuIHN0YXR1c2VzLnJlZHVjZShcclxuICAgIChmaWx0ZXJNYXA6IEZpbHRlck1hcCwgc3RhdHVzOiBBY3Rpb25TdGF0dXMpID0+IHtcclxuICAgICAgZmlsdGVyTWFwW3N0YXR1c10gPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZmlsdGVyTWFwO1xyXG4gICAgfSxcclxuICAgIDxGaWx0ZXJNYXA+e31cclxuICApO1xyXG59XHJcbiJdfQ==