!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ngxs/store"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngxs/devtools-plugin",["exports","@angular/core","@ngxs/store","rxjs/operators"],t):t(((e=e||self).ngxs=e.ngxs||{},e.ngxs["devtools-plugin"]={}),e.ng.core,e["ngxs-store"],e.rxjs.operators)}(this,(function(e,t,o,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var s=function(){return(s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var s in t=arguments[o])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};var r=new t.InjectionToken("NGXS_DEVTOOLS_OPTIONS"),i=function(){function e(e,t){var o=this;this._options=e,this._injector=t,this.devtoolsExtension=null,this.windowObj="undefined"!=typeof window?window:{};var n=this.windowObj.__REDUX_DEVTOOLS_EXTENSION__||this.windowObj.devToolsExtension;n&&(this.devtoolsExtension=n.connect(e),this.devtoolsExtension.subscribe((function(e){return o.dispatched(e)})))}return Object.defineProperty(e.prototype,"store",{get:function(){return this._injector.get(o.Store)},enumerable:!0,configurable:!0}),e.prototype.handle=function(e,t,o){var s=this,r=this._options&&this._options.disabled;return!this.devtoolsExtension||r?o(e,t):o(e,t).pipe(n.catchError((function(o){var n=s.store.snapshot();throw s.sendToDevTools(e,t,n),o})),n.tap((function(o){s.sendToDevTools(e,t,o)})))},e.prototype.sendToDevTools=function(e,t,n){var r=o.getActionTypeFromInstance(t);"@@INIT"===r?this.devtoolsExtension.init(e):this.devtoolsExtension.send(s({},t,{type:r}),n)},e.prototype.dispatched=function(e){var t=this;if("DISPATCH"===e.type){if("JUMP_TO_ACTION"===e.payload.type||"JUMP_TO_STATE"===e.payload.type){var o=JSON.parse(e.state);this.store.reset(o)}else if("TOGGLE_ACTION"===e.payload.type)console.warn("Skip is not supported at this time.");else if("IMPORT_STATE"===e.payload.type){var n=e.payload.nextLiftedState,s=n.actionsById,r=n.computedStates,i=n.currentStateIndex;this.devtoolsExtension.init(r[0].state),Object.keys(s).filter((function(e){return"0"!==e})).forEach((function(e){return t.devtoolsExtension.send(s[e],r[e].state)})),this.store.reset(r[i].state)}}else if("ACTION"===e.type){var a=JSON.parse(e.payload);this.store.dispatch(a)}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[r]}]},{type:t.Injector}]},e}();function a(e){return s({name:"NGXS"},e)}var p=new t.InjectionToken("USER_OPTIONS"),d=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:o.NGXS_PLUGINS,useClass:i,multi:!0},{provide:p,useValue:t},{provide:r,useFactory:a,deps:[p]}]}},e.decorators=[{type:t.NgModule}],e}();e.NGXS_DEVTOOLS_OPTIONS=r,e.NgxsReduxDevtoolsPlugin=i,e.NgxsReduxDevtoolsPluginModule=d,e.ɵa=a,e.ɵb=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngxs-devtools-plugin.umd.min.js.map